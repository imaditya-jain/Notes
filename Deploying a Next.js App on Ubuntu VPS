# Deploying a Next.js App on Ubuntu VPS

**Author:** Aditya Burse

---

## ⭐ Step 1: Update the server

```bash
sudo apt update && sudo apt upgrade -y

This tells Ubuntu to:

Check for the latest package versions

Update already installed software

-y means “yes to everything” so it doesn’t stop and ask questions



---

⭐ Step 2: Install Node.js (LTS)

curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -

This command:

Downloads a script from NodeSource

Tells Ubuntu where to get the stable (LTS) version of Node.js


sudo apt install -y nodejs

This actually installs:

Node.js → runs JavaScript on the server

npm → installs project dependencies


Check installation:

node -v
npm -v


---

⭐ Step 3: Install & start Nginx

sudo apt install nginx

Installs Nginx, which acts like a security gate and traffic manager.

sudo systemctl start nginx

Nginx starts right now.

sudo systemctl enable nginx

Make sure Nginx starts automatically when the server reboots.

sudo systemctl status nginx

Shows whether Nginx is running or not.


---

⭐ Step 4: Move to web directory & clone project

cd /var/www/html

This is the standard folder where web apps usually live.

git clone <your-repo>

Download your project code from GitHub to the server.

cd <project-name>

Enter the project folder.


---

⭐ Step 5: Install dependencies & build

npm install

Reads package.json and installs everything your app needs.

npm run build

Creates an optimized production build of the Next.js app.


---

⭐ Step 6: Install PM2 (App Bodyguard)

npm install -g pm2

Installs PM2 globally, a tool that:

Keeps the app running

Restarts it if it crashes

Runs it in the background


pm2 start npm --name nextjs-app -- start

PM2:

Runs npm start

Names the process for easy tracking

Keeps it alive 24/7


Check status & logs:

pm2 status
pm2 logs

Shows running apps and live error/output logs.


---

⭐ Step 7: Make app survive server reboot

pm2 startup

Generates startup instructions for the system.

pm2 save

Saves the current running apps so PM2 restarts them automatically after reboot.


---

⭐ Step 8: Configure Nginx as Reverse Proxy

sudo nano /etc/nginx/sites-available/default

server {
    listen 80;
    server_name _;

    location / {
        proxy_pass http://127.0.0.1:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

What this means in simple words:

Nginx listens on port 80 (normal web traffic)

When a request comes in:

It forwards it to Next.js running on port 3000


Users never see port 3000 — Nginx handles everything


Test & reload:

sudo nginx -t
sudo systemctl reload nginx


---

✅ Final Result

- Users access the site via browser
- Nginx receives the request
- Next.js responds through PM2
- App stays online even after crashes or reboot
